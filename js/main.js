"use strict";!function(){var a,e={tot:1500,min:0,sec:0},t=document.querySelector(".denied"),d=document.querySelector(".timeleft");sessionStorage.setItem("number",0),console.log("version 0.95"),window.onload=function(){o()};var o=function(){d.innerHTML=l(),function(){if("Notification"in window)return"granted"===Notification.permission?(t.classList.add("hide"),window.setTimeout(function(){return t.style.visibility="hidden"},500)):"denied"!==Notification.permission?"denied"!==Notification.permission&&Notification.requestPermission(function(o){"granted"===o?(t.classList.add("hide"),window.setTimeout(function(){return t.style.visibility="hidden"},500)):(notify=!1,t.textContent="The functionality of this service will be severely limited without notifications")}):t.textContent="The functionality of this service will be severely limited without notifications";t.textContent="Your browser does not support notifications. I advise to install a modern browser like Chrome Firefoz Opera or use Microsoft Edge"}()},m=function(){return sessionStorage.getItem("number")},u=function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"nothing";console.log("clear",o),clearInterval(a),e.tot=1500,d.innerHTML=l()},l=function(){return e.min=Math.floor(e.tot/60),e.min=e.min<10?e.min="0".concat(e.min):e.min,e.sec=e.tot%60,e.sec=e.sec<10?e.sec="0".concat(e.sec):e.sec,"".concat(e.min," : ").concat(e.sec)},i=function(){var o,t,i,n,r,c,s;o=e.tot,t=function(){1<=e.tot?e.tot--:e.tot=0,d.innerHTML=l()},i=function(){var o;o=m(),o++,sessionStorage.setItem("number",o),f("ring"),m()%4==0?new Notification("Pomodoro Timer",{body:"That were 4 pomodoro's, take a longer break. About 20 or 30 minutes",icon:"./img/tomato.jpg"}):m()%3==0?new Notification("Pomodoro Timer",{body:"You have completed tree pomodoro's, take a short break",icon:"./img/tomato.jpg"}):m()%2==0?new Notification("Pomodoro Timer",{body:"You have completed two pomodoro's, take a short break",icon:"./img/tomato.jpg"}):new Notification("Pomodoro Timer",{body:"You have completed a pomodoro, take a short break",icon:"./img/tomato.jpg"}),u("time end")},r=o/(n=o/1e3),c=0,s=(new Date).getTime(),window.setTimeout(function o(){if(c++==1e3*n)i();else{t(n,c);var e=(new Date).getTime()-s-c*r;a=setTimeout(o,r-e)}},r)},f=function(o){var e=new Audio("./sounds/ring.mp3"),t=new Audio("./sounds/wind.mp3");"ring"===o?e.play():t.play()};document.querySelector(".stop-timer").addEventListener("click",function(){clearInterval(a)}),document.querySelector(".set-timer").addEventListener("click",function(){f("wind"),i()}),document.querySelector(".clear-timer").addEventListener("click",function(){u("button"),f("ring")})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsidGltZUludCIsInRpbWUiLCJ0b3QiLCJtaW4iLCJzZWMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0aW1lRWwiLCJzZXRJdGVtIiwiY29uc29sZSIsImxvZyIsIndpbmRvdyIsImluaXQiLCJpbm5lckhUTUwiLCJ0aW1lRm9ybWF0dGVkIiwicmVxdWVzdE5vdGlmaWNhdGlvbiIsInBlcm1pc3Npb24iLCJkZW5pZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInN0eWxlIiwidmlzaWJpbGl0eSIsIk5vdGlmaWNhdGlvbiIsInNldFRpbWVvdXQiLCJyZXF1ZXN0UGVybWlzc2lvbiIsImdldFNlc3Npb25WYWwiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJpY29uIiwiYXJnIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2xlYXJJbnRlcnZhbCIsImJvZHkiLCJjb25jYXQiLCJ0aW1lciIsIm9uaW5zdGFuY2UiLCJvbmNvbXBsZXRlIiwic3RlcHMiLCJzcGVlZCIsImNvdW50Iiwic3RhcnQiLCJudW1iZXIiLCJzb3VuZCIsImluY3JlbWVudFNlc3Npb24iLCJjbGVhciIsIkRhdGUiLCJnZXRUaW1lIiwiaW5zdGFuY2UiLCJkaWZmIiwidHlwZSIsInJpbmciLCJBdWRpbyIsInBsYXkiLCJhZGRFdmVudExpc3RlbmVyIiwibm90aWZ5VGltZXNVcCJdLCJtYXBwaW5ncyI6ImNBQUEsV0FRRSxJQUNJQSxFQURKQyxFQUFBLENBQUFDLElBQW1CLEtBQW5CQyxJQUFBLEVBQUFDLElBQUEsR0FDYUgsRUFBT0ksU0FBQUMsY0FBQSxXQUFJQyxFQUFKRixTQUFBQyxjQUFBLGFBQWNILGVBQWRLLFFBQUEsU0FBQSxHQUFBQyxRQURwQkMsSUFBQSxnQkFHQUMsT0FBTUosT0FBU0YsV0FBU0MsS0FReEIsSUFzQlFNLEVBQUEsV0FXTkwsRUFBT00sVUFBWUMsSUFqQ08sV0FIQUYsR0FBSSxp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QUVESSxTQUFHQyxjQUFNLGdCQUFBa0QsaUJBQUEsUUFBQSxXQUVSVixFQUFBQSxVQUNBVyxFQUFBQSxVQW5JTiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7XHJcbiAgLy8gUGxhY2luZyBjb2RlIGluc2lkZSBzZWxmIGV4ZWN1dGluZyBmdW5jdGlvbiB0byBlbmNhcHN1bGF0ZSBjb2RlIGFuZCBub3QgY3JlYXRlIGdsb2JhbHNcclxuXHJcbiAgLy8gVE9ETzogQWRkIGEgdGltZSBmb3IgdGhlIGJyZWFrLCBlaXRoZXIgNSBtaW4gb2YgMzAgbWluIGRlcGVuZGluZyBvbiB0aGUgbnVtYmVyIG9mIHBvbW9kb3JvJ3NcclxuXHJcbiAgLy8gdGltZUludCwgdGltZSBhbmQgdGltZUVsIG5lZWQgdG8gYmUgZ2xvYmFscyBiZWNhdXNlIHRoZXkgbmVlZCB0byBcclxuICAvLyBiZSBhY2Nlc3NlZCBvdXRzaWRlIG9mIHRoZSBmdW5jdGlvbiBzY29wZSBcclxuXHJcbiAgbGV0IGFtb3VudCA9IDE1MDAsIC8vIDI1IG1pbnV0ZXMgKiA2MCBzZWNvbmRzIFxyXG4gICAgICB0aW1lSW50LCB0aW1lID0ge3RvdDogYW1vdW50LCBtaW46IDAsIHNlYzogMH0sIFxyXG4gICAgICBkZW5pZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlbmllZFwiKTtcclxuICBjb25zdCB0aW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpbWVsZWZ0XCIpO1xyXG4gIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJudW1iZXJcIiwgMCk7XHJcbiAgXHJcbiAgY29uc29sZS5sb2coXCJ2ZXJzaW9uIDAuOTVcIik7XHJcblxyXG4gIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtpbml0KCl9XHJcbiAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGluaXQoKSk7XHJcblxyXG4gIGNvbnN0IHJlcXVlc3ROb3RpZmljYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIC8vIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIG5vdGlmaWNhdGlvbnNcclxuICAgIGlmICghKFwiTm90aWZpY2F0aW9uXCIgaW4gd2luZG93KSkge1xyXG4gICAgICBkZW5pZWQudGV4dENvbnRlbnQgPSBcIllvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IG5vdGlmaWNhdGlvbnMuIEkgYWR2aXNlIHRvIGluc3RhbGwgYSBtb2Rlcm4gYnJvd3NlciBsaWtlIENocm9tZSBGaXJlZm96IE9wZXJhIG9yIHVzZSBNaWNyb3NvZnQgRWRnZVwiO1xyXG4gICAgICByZXR1cm47IC8vIG5vIG5vdGlmaWNhdGlvbiBvcHRpb25cclxuICAgICAgXHJcbiAgICB9IGVsc2UgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSBcImdyYW50ZWRcIikge1xyXG4gICAgICAvLyBOb3RpZmljYXRpb25zIGhhdmUgYWxyZWFkeSBiZWVuIGdyYW50ZWQsIHJlbW92ZSB0ZXh0XHJcbiAgICAgIGRlbmllZC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gZGVuaWVkLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiLCA1MDApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9IGVsc2UgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZGVuaWVkJykge1xyXG4gICAgICBkZW5pZWQudGV4dENvbnRlbnQgPSBcIlRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoaXMgc2VydmljZSB3aWxsIGJlIHNldmVyZWx5IGxpbWl0ZWQgd2l0aG91dCBub3RpZmljYXRpb25zXCI7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH0gZWxzZSBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09ICdkZW5pZWQnKSB7XHJcbiAgICAgIC8vIElmIHRoZSBwZXJtaXNzaW9uIGhhcyBhbHNvIG5vdCBiZWVuIHNldCB0byBkZW5pZWQsIHJlcXVlc3QgcGVybWlzc2lvblxyXG4gICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oZnVuY3Rpb24gKHBlcm1pc3Npb24pIHtcclxuICAgICAgICBpZiAocGVybWlzc2lvbiA9PT0gXCJncmFudGVkXCIpIHtcclxuICAgICAgICAgIC8vIFRoZSB1c2VyIGlzIGFsbG93aW5nIG5vdGlmaWNhdGlvbnNcclxuICAgICAgICAgIGRlbmllZC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcclxuICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IGRlbmllZC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIiwgNTAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gVXNlciBkaXNhbGxvd3Mgbm90aWZpY2F0aW9ucywgaGlnaGxpZ2h0IGxpbWl0ZWQgZnVuY3Rpb25cclxuICAgICAgICAgIG5vdGlmeSA9IGZhbHNlOyAvLyBqdXN0IGluIGNhc2UsIG5vdCB1c2luZyBhdG1cclxuICAgICAgICAgIGRlbmllZC50ZXh0Q29udGVudCA9IFwiVGhlIGZ1bmN0aW9uYWxpdHkgb2YgdGhpcyBzZXJ2aWNlIHdpbGwgYmUgc2V2ZXJlbHkgbGltaXRlZCB3aXRob3V0IG5vdGlmaWNhdGlvbnNcIjtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gSW5pdGlhdGUgdGhlIHNjcmlwdFxyXG4gICAgdGltZUVsLmlubmVySFRNTCA9IHRpbWVGb3JtYXR0ZWQoKTtcclxuICAgIHJlcXVlc3ROb3RpZmljYXRpb24oKTtcclxuICB9XHJcbiAgXHJcbiAgY29uc3QgZ2V0U2Vzc2lvblZhbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gUmV0cmlldmUgdGhlIG51bWJlciBvZiBwb21vZG9ybydzIGFscmVhZHkgYWNoaWV2ZWRcclxuICAgIHJldHVybiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwibnVtYmVyXCIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaW5jcmVtZW50U2Vzc2lvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gSW5jcmVhc2UgdGhlIG51bWJlciBvZiBwb21vZG9ybyBpbiB0aGUgYnJvd3NlciBzZXNzaW9uXHJcbiAgICBsZXQgbnVtYmVyID0gZ2V0U2Vzc2lvblZhbCgpO1xyXG4gICAgbnVtYmVyKys7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwibnVtYmVyXCIsIG51bWJlcik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBub3RpZnlUaW1lc1VwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBQbGF5IHRoZSB0aGUgcmluZyBhbmQgZGVwZW5kaW5nIG9uIHRoZSBudWJlciBvZiBwb21vZG9ybydzIHJldHVybiBhIHNlcnRhaW4gbm90aWZpY2F0aW9uXHJcbiAgICBzb3VuZChcInJpbmdcIik7XHJcbiAgICBpZiAoZ2V0U2Vzc2lvblZhbCgpICUgNCA9PT0gMCkge1xyXG4gICAgICBuZXcgTm90aWZpY2F0aW9uKFwiUG9tb2Rvcm8gVGltZXJcIiwge2JvZHk6XCJUaGF0IHdlcmUgNCBwb21vZG9ybydzLCB0YWtlIGEgbG9uZ2VyIGJyZWFrLiBBYm91dCAyMCBvciAzMCBtaW51dGVzXCIsIGljb246XCIuL2ltZy90b21hdG8uanBnXCJ9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfSBlbHNlIGlmKGdldFNlc3Npb25WYWwoKSAlIDMgPT09IDApIHsgXHJcbiAgICAgIG5ldyBOb3RpZmljYXRpb24oXCJQb21vZG9ybyBUaW1lclwiLCB7Ym9keTpcIllvdSBoYXZlIGNvbXBsZXRlZCB0cmVlIHBvbW9kb3JvJ3MsIHRha2UgYSBzaG9ydCBicmVha1wiLCBpY29uOlwiLi9pbWcvdG9tYXRvLmpwZ1wifSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH0gZWxzZSBpZihnZXRTZXNzaW9uVmFsKCkgJSAyID09PSAwKSB7IFxyXG4gICAgICBuZXcgTm90aWZpY2F0aW9uKFwiUG9tb2Rvcm8gVGltZXJcIiwge2JvZHk6XCJZb3UgaGF2ZSBjb21wbGV0ZWQgdHdvIHBvbW9kb3JvJ3MsIHRha2UgYSBzaG9ydCBicmVha1wiLCBpY29uOlwiLi9pbWcvdG9tYXRvLmpwZ1wifSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5ldyBOb3RpZmljYXRpb24oXCJQb21vZG9ybyBUaW1lclwiLCB7Ym9keTpcIllvdSBoYXZlIGNvbXBsZXRlZCBhIHBvbW9kb3JvLCB0YWtlIGEgc2hvcnQgYnJlYWtcIiwgaWNvbjpcIi4vaW1nL3RvbWF0by5qcGdcIn0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBjbGVhciA9IGZ1bmN0aW9uKGFyZyA9ICdub3RoaW5nJykge1xyXG4gICAgLy8gQ2xlYXIgaW50ZXJ2YWwgYW5kIHJlc2V0IHRpbWVcclxuICAgIGNvbnNvbGUubG9nKCdjbGVhcicsIGFyZyk7XHJcbiAgICBjbGVhckludGVydmFsKHRpbWVJbnQpO1xyXG4gICAgdGltZS50b3QgPSBhbW91bnQ7XHJcbiAgICB0aW1lRWwuaW5uZXJIVE1MID0gdGltZUZvcm1hdHRlZCgpXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdGltZUZvcm1hdHRlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gUmV0dXJuIGEgdGVtcGxhdGUgc3RyaW5nIHdpdGggdGhlIG1pbnV0ZXMgYW5kIHNlY29uZHMgc3RpbGwgdG8gZ29cclxuICAgIHRpbWUubWluID0gTWF0aC5mbG9vcih0aW1lLnRvdCAvIDYwKTtcclxuICAgIHRpbWUubWluID0gdGltZS5taW4gPCAxMD8gdGltZS5taW4gPSBgMCR7dGltZS5taW59YDogdGltZS5taW47XHJcbiAgICB0aW1lLnNlYyA9IHRpbWUudG90ICUgNjA7XHJcbiAgICB0aW1lLnNlYyA9IHRpbWUuc2VjIDwgMTA/IHRpbWUuc2VjID0gYDAke3RpbWUuc2VjfWA6IHRpbWUuc2VjO1xyXG4gICAgcmV0dXJuIGAke3RpbWUubWlufSA6ICR7dGltZS5zZWN9YDtcclxuICB9XHJcblxyXG4gIC8vIFRoaXMgdGltZSB1c2luZyBhIGNhbGxpYnJhdGVkIHNldFRpbWVvdXQgZnVuY3Rpb25cclxuICBjb25zdCBkb1RpbWVyID0gZnVuY3Rpb24obGVuZ3RoLCBvbmluc3RhbmNlLCBvbmNvbXBsZXRlKSB7XHJcbiAgICB2YXIgc3RlcHMgPSBsZW5ndGggLyAxMDAwLFxyXG4gICAgICAgIHNwZWVkID0gbGVuZ3RoIC8gc3RlcHMsXHJcbiAgICAgICAgY291bnQgPSAwLFxyXG4gICAgICAgIHN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gaW5zdGFuY2UoKSB7XHJcbiAgICAgIGlmKGNvdW50KysgPT0gc3RlcHMgKiAxMDAwKSB7XHJcbiAgICAgICAgICBvbmNvbXBsZXRlKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBvbmluc3RhbmNlKHN0ZXBzLCBjb3VudCk7XHJcbiAgICAgICAgICB2YXIgZGlmZiA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0KSAtIChjb3VudCAqIHNwZWVkKTtcclxuICAgICAgICAgIHRpbWVJbnQgPSBzZXRUaW1lb3V0KGluc3RhbmNlLCAoc3BlZWQgLSBkaWZmKSk7XHJcbiAgICAgIH1cclxuICAgIH0gXHJcbiAgICB3aW5kb3cuc2V0VGltZW91dChpbnN0YW5jZSwgc3BlZWQpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdGltZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIGRvVGltZXIodGltZS50b3QsICgpID0+IHtcclxuICAgICAgLy8gY29uc29sZS5sb2codGltZS50b3QpO1xyXG4gICAgICB0aW1lLnRvdCA+PSAxPyB0aW1lLnRvdC0tOiB0aW1lLnRvdCA9IDA7XHJcbiAgICAgIHRpbWVFbC5pbm5lckhUTUwgPSB0aW1lRm9ybWF0dGVkKCk7XHJcbiAgICB9LCAgKCkgPT4ge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZygndGltZXMgdXAnKTtcclxuICAgICAgaW5jcmVtZW50U2Vzc2lvbigpO1xyXG4gICAgICBub3RpZnlUaW1lc1VwKCk7XHJcbiAgICAgIGNsZWFyKCd0aW1lIGVuZCcpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gICAgXHJcbiAgLy8gU291bmRzLCBtYXliZSBsYXRlclxyXG4gIGNvbnN0IHNvdW5kID0gZnVuY3Rpb24odHlwZSkge1xyXG4gICAgY29uc3QgcmluZyA9IG5ldyBBdWRpbygnLi9zb3VuZHMvcmluZy5tcDMnKTtcclxuICAgIGNvbnN0IHdpbmQgPSBuZXcgQXVkaW8oJy4vc291bmRzL3dpbmQubXAzJyk7XHJcbiAgICB0eXBlID09PSBcInJpbmdcIj8gcmluZy5wbGF5KCk6IHdpbmQucGxheSgpO1xyXG4gIH1cclxuICBcclxuICAvLyBFdmVudCBsaXN0ZW5lcnNcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0b3AtdGltZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdTdG9wIHRpbWUgYnV0dG9uJyk7XHJcbiAgICBjbGVhckludGVydmFsKHRpbWVJbnQpO1xyXG4gIH0pO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2V0LXRpbWVyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnU3RhcnQgdGltZSBidXR0b24nKTtcclxuICAgIHNvdW5kKFwid2luZFwiKVxyXG4gICAgdGltZXIoKTtcclxuICB9KTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsZWFyLXRpbWVyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnQ2xlYXIgYnV0dG9uJyk7XHJcbiAgICBjbGVhcignYnV0dG9uJyk7XHJcbiAgICBzb3VuZChcInJpbmdcIik7XHJcbiAgfSk7XHJcblxyXG59KSgpOyJdfQ==
